<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Hubify Store</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./css/brutalism.css">
</head>

<body>
    <!-- Login View -->
    <div class="login-container" id="login-view">
        <div class="login-box brutal-box">
            <div class="login-box__header">
                <div class="icon-box icon-box--yellow icon-box--large">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2" />
                        <path d="M7 11V7a5 5 0 0 1 10 0v4" />
                    </svg>
                </div>
                <h1 class="login-box__title">ADMIN LOGIN</h1>
            </div>
            <form class="login-box__form" id="login-form">
                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" class="input" id="username" required>
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" class="input" id="password" required>
                </div>
                <button type="submit" class="btn btn--green" style="width: 100%;">LOGIN</button>
            </form>
            <p style="text-align: center; margin-top: 1rem;">
                <a href="/" style="color: inherit;">← Back to Home</a>
            </p>
        </div>
    </div>

    <!-- Dashboard View -->
    <div class="hidden" id="dashboard-view">
        <!-- Header -->
        <header class="header">
            <div class="header__inner admin-header">
                <a href="/" class="header__logo">
                    <span>HUBIFY</span>.STORE <small style="font-size: 0.5em; opacity: 0.7;">ADMIN</small>
                </a>
                <nav class="admin-nav">
                    <button class="btn btn--small" id="btn-refresh-stats">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <polyline points="23,4 23,10 17,10" />
                            <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10" />
                        </svg>
                        Refresh
                    </button>
                    <button class="btn btn--small btn--red" id="btn-logout">Logout</button>
                </nav>
            </div>
        </header>

        <!-- Main Content -->
        <main class="admin-main">
            <!-- Stats -->
            <section class="section">
                <div class="section__header">
                    <h2 class="section__title">
                        <div class="icon-box icon-box--blue">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <line x1="18" y1="20" x2="18" y2="10" />
                                <line x1="12" y1="20" x2="12" y2="4" />
                                <line x1="6" y1="20" x2="6" y2="14" />
                            </svg>
                        </div>
                        STATISTICS
                    </h2>
                </div>
                <div class="stats-grid" id="stats-grid">
                    <div class="stat-card brutal-box">
                        <div class="stat-card__icon icon-box icon-box--pink">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" />
                                <polyline points="22,6 12,13 2,6" />
                            </svg>
                        </div>
                        <div class="stat-card__value" id="stat-today">-</div>
                        <div class="stat-card__label">EMAILS TODAY</div>
                    </div>
                    <div class="stat-card brutal-box">
                        <div class="stat-card__icon icon-box icon-box--cyan">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M22 12h-6l-2 3h-4l-2-3H2" />
                                <path
                                    d="M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z" />
                            </svg>
                        </div>
                        <div class="stat-card__value" id="stat-total">-</div>
                        <div class="stat-card__label">TOTAL EMAILS</div>
                    </div>
                    <div class="stat-card brutal-box">
                        <div class="stat-card__icon icon-box icon-box--orange">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" />
                                <circle cx="9" cy="7" r="4" />
                                <path d="M23 21v-2a4 4 0 0 0-3-3.87" />
                                <path d="M16 3.13a4 4 0 0 1 0 7.75" />
                            </svg>
                        </div>
                        <div class="stat-card__value" id="stat-inboxes">-</div>
                        <div class="stat-card__label">ACTIVE INBOXES</div>
                    </div>
                    <div class="stat-card brutal-box">
                        <div class="stat-card__icon icon-box icon-box--purple">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <circle cx="12" cy="12" r="10" />
                                <polyline points="12,6 12,12 16,14" />
                            </svg>
                        </div>
                        <div class="stat-card__value" id="stat-expired">-</div>
                        <div class="stat-card__label">EXPIRED (PENDING)</div>
                    </div>
                </div>
            </section>

            <!-- Domain Management -->
            <section class="section">
                <div class="section__header">
                    <h2 class="section__title">
                        <div class="icon-box icon-box--green">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <circle cx="12" cy="12" r="10" />
                                <line x1="2" y1="12" x2="22" y2="12" />
                                <path
                                    d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z" />
                            </svg>
                        </div>
                        DOMAINS
                    </h2>
                    <button class="btn btn--small btn--green" id="btn-add-domain">+ Add Domain</button>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Domain</th>
                                <th>Status</th>
                                <th>Created</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="domains-table"></tbody>
                    </table>
                </div>
            </section>

            <!-- Names Management -->
            <section class="section">
                <div class="section__header">
                    <h2 class="section__title">
                        <div class="icon-box icon-box--purple">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
                                <circle cx="12" cy="7" r="4" />
                            </svg>
                        </div>
                        NAMES
                    </h2>
                    <button class="btn btn--small btn--purple" id="btn-add-name">+ Add Name</button>
                </div>
                <p style="margin-bottom: 1rem; opacity: 0.8;">Names used for random email generation (format: firstname
                    + lastname + 2 digits)</p>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Gender</th>
                                <th>Status</th>
                                <th>Created</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="names-table"></tbody>
                    </table>
                </div>
            </section>

            <!-- Cleanup -->
            <section class="section">
                <div class="section__header">
                    <h2 class="section__title">
                        <div class="icon-box icon-box--yellow">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <polyline points="3,6 5,6 21,6" />
                                <path
                                    d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
                            </svg>
                        </div>
                        CLEANUP
                    </h2>
                    <button class="btn btn--small btn--yellow" id="btn-cleanup">Run Cleanup Now</button>
                </div>
                <p>Cleanup automatically runs every hour. Use this button to trigger manual cleanup.</p>
            </section>

            <!-- Recent Emails -->
            <section class="section">
                <div class="section__header">
                    <h2 class="section__title">
                        <div class="icon-box icon-box--pink">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" />
                                <polyline points="22,6 12,13 2,6" />
                            </svg>
                        </div>
                        RECENT EMAILS
                    </h2>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>To</th>
                                <th>From</th>
                                <th>Subject</th>
                                <th>Received</th>
                            </tr>
                        </thead>
                        <tbody id="recent-emails-table"></tbody>
                    </table>
                </div>
            </section>
        </main>
    </div>

    <!-- Add Domain Modal -->
    <div class="modal" id="domain-modal">
        <div class="modal__content" style="max-width: 400px;">
            <div class="modal__header">
                <h3 class="modal__title">Add New Domain</h3>
                <button class="modal__close" id="domain-modal-close">✕</button>
            </div>
            <div class="modal__body">
                <form id="add-domain-form">
                    <div class="form-group">
                        <label for="new-domain">Domain Name</label>
                        <input type="text" class="input" id="new-domain" placeholder="example.com" required>
                    </div>
                    <button type="submit" class="btn btn--green" style="width: 100%;">Add Domain</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Name Modal -->
    <div class="modal" id="name-modal">
        <div class="modal__content" style="max-width: 400px;">
            <div class="modal__header">
                <h3 class="modal__title">Add New Name</h3>
                <button class="modal__close" id="name-modal-close">✕</button>
            </div>
            <div class="modal__body">
                <form id="add-name-form">
                    <div class="form-group">
                        <label for="new-name">Name</label>
                        <input type="text" class="input" id="new-name" placeholder="john" required pattern="[a-zA-Z]+">
                        <small style="opacity: 0.7;">Letters only, will be lowercase</small>
                    </div>
                    <div class="form-group">
                        <label for="new-name-gender">Gender</label>
                        <select class="select" id="new-name-gender">
                            <option value="neutral">Neutral</option>
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn--purple" style="width: 100%;">Add Name</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toast-container"></div>

    <script type="module" src="./js/admin.js"></script>
</body>

</html>